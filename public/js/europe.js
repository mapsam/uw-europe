function drawMap(t,e,r,a,n){{var o=(svg.selectAll(".land").data(topojson.feature(r,r.objects.land).features).enter().append("path").attr("class","land").attr("d",path),svg.selectAll(".countries").data(topojson.feature(e,e.objects.countries).features).enter().append("path").attr("class","country").style("fill",function(t){return countryProperties(t.properties.admin).color}).attr("d",path),svg.selectAll(".river").data(topojson.feature(n,n.objects.rivers).features).enter().append("path").attr("class","river").attr("d",path),[]);svg.selectAll(".river-label").data(topojson.feature(n,n.objects.rivers).features).enter().append("text").attr("class","river-label").attr("text-anchor","middle").attr("transform",function(t){var e=[path.centroid(t)[0],path.centroid(t)[1]];return"translate("+e+")"}).attr("dy",0).attr("dx",0).text(function(t){return-1==o.indexOf(t.properties.name)?(o.push(t.properties.name),t.properties.name):""}),svg.selectAll(".country-label").data(topojson.feature(e,e.objects.countries).features).enter().append("text").attr("class",function(t){return countryProperties(t.properties.admin).className}).attr("text-anchor","middle").attr("transform",function(t){var e=[path.centroid(t)[0],path.centroid(t)[1]],r=countryProperties(t.properties.admin).rotate;return"translate("+e+") rotate("+r+")"}).attr("dy",function(t){return countryProperties(t.properties.admin).y}).attr("dx",function(t){return countryProperties(t.properties.admin).x}).text(function(t){return t.properties.admin}),svg.selectAll(".place").data(a.features).enter().append("path").attr("d",path.pointRadius(2)).attr("class","place"),svg.selectAll(".place-label").data(a.features).enter().append("text").attr("transform",function(t){return"translate("+projection(t.geometry.coordinates)+")"}).attr("dy",function(t){return placeProperties(t.properties.name).y}).attr("dx",function(t){return placeProperties(t.properties.name).x}).style("text-anchor",function(t){return placeProperties(t.properties.name).a}).text(function(t){return t.properties.name}).attr("class",function(t){return t.properties.adm0cap?"place-label place-capital":"place-label"})}}var width=window.innerWidth,height=window.innerHeight;projection=d3.geo.orthographic().translate([width/2,height/2]).scale(1100).rotate([-18,-51,5]),path=d3.geo.path().projection(projection),svg=d3.select("#map").append("svg").attr("width",width).attr("height",height),queue().defer(d3.json,"data/countries.json").defer(d3.json,"data/land.json").defer(d3.json,"data/places.geojson").defer(d3.json,"data/rivers.json").await(drawMap);
function countryProperties(a){var e,l=["#A8B6C7","#9A8F8A","#BDBC9C","#E5D5B3","#DED6CC"];switch(a){case"Albania":e={color:l[4],className:"country-label small dark",x:-9,y:7,rotate:0};break;case"Aland":e={color:l[0],className:"country-label hide",x:0,y:0,rotate:0};break;case"Andorra":e={color:l[0],className:"country-label small dark",x:25,y:0,rotate:0};break;case"Austria":e={color:l[2],className:"country-label small",x:4,y:5,rotate:-30};break;case"Belgium":e={color:l[1],className:"country-label small",x:17,y:7,rotate:0};break;case"Bulgaria":e={color:l[0],className:"country-label small",x:0,y:4,rotate:0};break;case"Bos. & Herz.":e={color:l[4],className:"country-label small dark",x:0,y:-4,rotate:0};break;case"Belarus":e={color:l[4],className:"country-label",x:0,y:10,rotate:0};break;case"Switz.":e={color:l[3],className:"country-label small",x:0,y:2,rotate:-30};break;case"Czech Rep.":e={color:l[1],className:"country-label small",x:0,y:5,rotate:0};break;case"Germany":e={color:l[0],className:"country-label",x:0,y:0,rotate:0};break;case"Denmark":e={color:l[3],className:"country-label dark",x:-5,y:0,rotate:0};break;case"Spain":e={color:l[1],className:"country-label",x:0,y:10,rotate:0};break;case"Estonia":e={color:l[3],className:"country-label small",x:3,y:4,rotate:30};break;case"Finland":e={color:l[1],className:"country-label",x:6,y:34,rotate:0};break;case"France":e={color:l[2],className:"country-label",x:30,y:0,rotate:0};break;case"Faroe Islands":e={color:l[0],className:"country-label hide",x:0,y:0,rotate:0};break;case"U.K.":e={color:l[3],className:"country-label",x:7,y:26,rotate:0};break;case"Guernsey":e={color:l[0],className:"country-label hide",x:0,y:0,rotate:0};break;case"Greece":e={color:l[2],className:"country-label small",x:-21,y:-1,rotate:0};break;case"Croatia":e={color:l[3],className:"country-label small",x:8,y:-5,rotate:0};break;case"Hungary":e={color:l[0],className:"country-label",x:-4,y:5,rotate:0};break;case"Isle of Man":e={color:l[0],className:"country-label hide",x:0,y:0,rotate:0};break;case"Ireland":e={color:l[1],className:"country-label small",x:-2,y:16,rotate:0};break;case"Iceland":e={color:l[0],className:"country-label",x:4,y:7,rotate:0};break;case"Italy":e={color:l[4],className:"country-label",x:2,y:0,rotate:0};break;case"Jersey":e={color:l[0],className:"country-label hide",x:0,y:0,rotate:0};break;case"Kos.":e={color:l[3],className:"country-label small",x:1,y:4,rotate:0};break;case"Liechtenstein":e={color:l[0],className:"country-label hide",x:0,y:0,rotate:0};break;case"Lithuania":e={color:l[1],className:"country-label small",x:-2,y:0,rotate:0};break;case"Lux.":e={color:l[3],className:"country-label small",x:16,y:0,rotate:0};break;case"Latvia":e={color:l[2],className:"country-label small",x:12,y:3,rotate:0};break;case"Monaco":e={color:l[0],className:"country-label small dark",x:-4,y:0,rotate:0};break;case"Moldova":e={color:l[3],className:"country-label small",x:0,y:-5,rotate:0};break;case"Mac.":e={color:l[1],className:"country-label small",x:2,y:3,rotate:0};break;case"Malta":e={color:l[0],className:"country-label small dark",x:-18,y:0,rotate:0};break;case"Montenegro":e={color:l[0],className:"country-label small dark",x:-26,y:4,rotate:0};break;case"Netherlands":e={color:l[4],className:"country-label small dark",x:0,y:8,rotate:0};break;case"Norway":e={color:l[2],className:"country-label",x:-100,y:25,rotate:-60};break;case"Poland":e={color:l[3],className:"country-label",x:-2,y:10,rotate:0};break;case"Portugal":e={color:l[0],className:"country-label",x:0,y:10,rotate:-70};break;case"Romania":e={color:l[1],className:"country-label",x:-2,y:2,rotate:0};break;case"Russia":e={color:l[0],className:"country-label",x:-100,y:300,rotate:0};break;case"San Marino":e={color:l[0],className:"country-label small dark",x:0,y:-4,rotate:0};break;case"Serbia":e={color:l[2],className:"country-label small",x:3,y:10,rotate:0};break;case"Slovakia":e={color:l[4],className:"country-label small",x:7,y:-2,rotate:0};break;case"Slovenia":e={color:l[1],className:"country-label small",x:-10,y:-2,rotate:0};break;case"Sweden":e={color:l[4],className:"country-label",x:10,y:-10,rotate:-60};break;case"Ukraine":e={color:l[2],className:"country-label",x:0,y:0,rotate:0};break;default:e={color:l[0],className:"country-label",x:0,y:0,rotate:0}}return e}
function placeProperties(a){var r={tr:{x:2,y:-2,a:"start"},tl:{x:-3,y:-2,a:"end"},bl:{x:-3,y:7,a:"end"},br:{x:2,y:7,a:"start"}};switch(a){case"Vatican City":attr=r.bl;break;case"Vienna":attr=r.tl;break;case"Andorra":attr=r.bl;break;case"Pristina":attr=r.tl;break;case"Podgorica":attr=r.bl;break;case"Kbenhavn":attr=r.br;break;case"Tallinn":attr=r.tl;break;case"Ljubljana":attr=r.bl;break;case"Chisinau":attr=r.bl;break;case"Bern":attr=r.tl;break;case"Riga":attr=r.tl;break;case"Sofia":attr=r.tl;break;case"Vilnius":attr=r.bl;break;case"Turin":attr=r.br;break;case"Lisbon":attr=r.bl;break;case"Luxembourg":attr=r.br;break;case"London":attr=r.bl;break;case"Berlin":attr=r.tl;break;case"Tirana":attr=r.tl;break;case"Sarajevo":attr=r.bl;break;case"San Marino":attr=r.bl;break;case"Reykjav√≠k":attr=r.tl;break;case"Barcelona":attr=r.br;break;case"Birmingham":attr=r.br;break;case"Cardiff":attr=r.tl;break;case"Dnipropetrovsk":attr=r.br;break;case"Lille":attr=r.bl;break;case"Marseille":attr=r.br;break;default:attr=r.tr}return attr}