function drawMap(t,e,r,a,n){{var o=(svg.selectAll(".land").data(topojson.feature(r,r.objects.land).features).enter().append("path").attr("class","land").attr("d",path),svg.selectAll(".countries").data(topojson.feature(e,e.objects.countries).features).enter().append("path").attr("class","country").style("fill",function(t){return countryProperties(t.properties.admin).color}).attr("d",path),svg.selectAll(".river").data(topojson.feature(n,n.objects.rivers).features).enter().append("path").attr("class","river").attr("d",path),[]);svg.selectAll(".river-label").data(topojson.feature(n,n.objects.rivers).features).enter().append("text").attr("class","river-label").attr("text-anchor","middle").attr("transform",function(t){var e=[path.centroid(t)[0],path.centroid(t)[1]];return"translate("+e+")"}).attr("dy",0).attr("dx",0).text(function(t){return-1==o.indexOf(t.properties.name)?(o.push(t.properties.name),t.properties.name):""}),svg.selectAll(".country-label").data(topojson.feature(e,e.objects.countries).features).enter().append("text").attr("class",function(t){return countryProperties(t.properties.admin).className}).attr("text-anchor","middle").attr("transform",function(t){var e=[path.centroid(t)[0],path.centroid(t)[1]],r=countryProperties(t.properties.admin).rotate;return"translate("+e+") rotate("+r+")"}).attr("dy",function(t){return countryProperties(t.properties.admin).y}).attr("dx",function(t){return countryProperties(t.properties.admin).x}).text(function(t){return t.properties.admin}),svg.selectAll(".place").data(a.features).enter().append("path").attr("d",path.pointRadius(2)).attr("class","place"),svg.selectAll(".place-label").data(a.features).enter().append("text").attr("transform",function(t){return"translate("+projection(t.geometry.coordinates)+")"}).attr("dy",function(t){return placeProperties(t.properties.name).y}).attr("dx",function(t){return placeProperties(t.properties.name).x}).style("text-anchor",function(t){return placeProperties(t.properties.name).a}).text(function(t){return t.properties.name}).attr("class",function(t){return t.properties.adm0cap?"place-label place-capital":"place-label"})}}var width=window.innerWidth,height=window.innerHeight;projection=d3.geo.orthographic().translate([width/2,height/2]).scale(1100).rotate([-18,-51,5]),path=d3.geo.path().projection(projection),svg=d3.select("#map").append("svg").attr("width",width).attr("height",height),queue().defer(d3.json,"data/countries.json").defer(d3.json,"data/land.json").defer(d3.json,"data/places.geojson").defer(d3.json,"data/rivers.json").await(drawMap);